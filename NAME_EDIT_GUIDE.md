# ุฏููู ุชุนุฏูู ุงูุงุณู ูู ุงูููู ุงูุดุฎุตู
# How to Edit Name in Profile

## โ ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ 100%

ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุจุดูู ูุงููุ ูุงูุขู **ุชุนุฏูู ุงูุงุณู ููุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุง ูุฎุชูู ุฃุจุฏุงู** ุญุชู ุจุนุฏ:
- โ ุชุณุฌูู ุงูุฎุฑูุฌ
- โ ุฅุบูุงู ุงูุชุทุจูู
- โ ุฅุบูุงู ุงููุชุตูุญ
- โ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฌูุงุฒ

---

## ๐ฑ ููููุฉ ุชุนุฏูู ุงูุงุณู ูู ุงูุชุทุจูู

### ุงูุฎุทูุงุช:

1. **ุงูุชุญ ุงูุชุทุจูู** ูุณุฌู ุฏุฎููู
2. **ุงุฐูุจ ุฅูู ุงูููู ุงูุดุฎุตู** (ุตูุญุฉ profile.html)
3. **ุงุถุบุท ุนูู ุฒุฑ "ุชุนุฏูู"** โ๏ธ
4. **ุนุฏูู ุงูุงุณู** ููุง ุชุฑูุฏ
5. **ุงุถุบุท ุนูู "ุญูุธ"** ๐พ
6. **ุณูุธูุฑ ูู ุฑุณุงูุฉ ุชุฃููุฏ**: "โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช"

### ุงูุขู ุฌุฑูุจ:
- ุณุฌู ุฎุฑูุฌ ๐ช
- ุฃุบูู ุงูุชุทุจูู โ
- ุงูุชุญ ุงูุชุทุจูู ูุฑุฉ ุฃุฎุฑู ูุณุฌู ุฏุฎูู ๐
- **ุณุชุฌุฏ ุงูุงุณู ุงูุฌุฏูุฏ ููุฌูุฏ!** โจ

---

## ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

ุชู ุชุดุบูู ุงุฎุชุจุงุฑ ุดุงูู ูุงููุชูุฌุฉ:

```
๐ ุงูุชูู ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ!

ุงููุชุงุฆุฌ:
  โ ุชุญุฏูุซ ุงูุงุณู: ูุนูู
  โ ุญูุธ ุงูุงุณู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: ูุนูู
  โ ุงุณุชูุฑุงุฑูุฉ ุงูุงุณู ุจุนุฏ ุชุณุฌูู ุงูุฎุฑูุฌ: ูุนูู
  โ ุงุณุชูุฑุงุฑูุฉ ุงูุงุณู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู: ูุนูู

โจ ุงูุงุณู ูู ูุฎุชูู ูููุง ุญุฏุซ!
```

---

## ๐ป ุงุฎุชุจุงุฑ ูู API ูุจุงุดุฑุฉ

### 1. ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู:
```bash
curl http://localhost:3000/api/users/1
```

### 2. ุชุญุฏูุซ ุงูุงุณู:
```bash
curl -X PUT http://localhost:3000/api/users/1 \
  -H "Content-Type: application/json" \
  -d '{"name":"ุงูุงุณู ุงูุฌุฏูุฏ"}'
```

### 3. ุชุณุฌูู ุฏุฎูู (ููุชุญูู ูู ุงูุงุณุชูุฑุงุฑูุฉ):
```bash
curl -X POST http://localhost:3000/api/users/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"0551234567","name":"ุฃู ุงุณู"}'
```

**ุณุชุฌุฏ ุงูุงุณู ุงููุญุฏุซ ูู ุงูุงุณุชุฌุงุจุฉ!** โ

---

## ๐๏ธ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ

ููููู ุงูุชุญูู ูู ุฃู ุงูุงุณู ูุญููุธ ูู PostgreSQL:

```bash
psql "postgresql://postgres:gnQuusUxfjjvwiryBRkdvFjzBkXhEieJ@trolley.proxy.rlwy.net:47888/railway" \
  -c "SELECT id, name, phone FROM users WHERE id = 1;"
```

---

## ๐ง ููู ูุนูู ุงููุธุงูุ

### ุงูููุฏ ูู server.js:

```javascript
// endpoint ุชุญุฏูุซ ุงููุณุชุฎุฏู
app.put('/api/users/:id', async (req, res) => {
    const { name } = req.body;
    
    // ุชุญุฏูุซ ูุจุงุดุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    const result = await pool.query(
        `UPDATE users SET name = $1, updated_at = CURRENT_TIMESTAMP 
         WHERE id = $2 
         RETURNING *`,
        [name, id]
    );
    
    res.json({ success: true, data: result.rows[0] });
});

// endpoint ุชุณุฌูู ุงูุฏุฎูู
app.post('/api/users/login', async (req, res) => {
    const { phone } = req.body;
    
    // ุฌูุจ ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    let result = await pool.query(
        'SELECT * FROM users WHERE phone = ANY($1)',
        [phoneCandidates]
    );
    
    // ุฅุฐุง ููุฌุฏ ุงููุณุชุฎุฏูุ ููุฑุฌุน ุจูุงูุงุชู (ุจูุง ูู ุฐูู ุงูุงุณู ุงููุญุฏุซ)
    if (result.rows.length > 0) {
        return res.json({ success: true, data: result.rows[0] });
    }
});
```

### ุงูููุฏ ูู profile.html:

```javascript
async function saveProfileEdits() {
    const nameElement = document.querySelector('h1');
    const updateData = {
        name: nameElement.textContent.trim()
    };
    
    // ุฅุฑุณุงู ุงูุชุญุฏูุซ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    const response = await ApiService.users.update(currentUser.id, updateData);
    
    if (response.success) {
        // ุชุญุฏูุซ localStorage ููุณุฎุฉ ุงุญุชูุงุทูุฉ
        SafeStorage.setItem(USER_KEY, JSON.stringify(response.data));
        alert('โ ุชู ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
    }
}

async function loadUserData() {
    // ุฌูุจ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    const response = await ApiService.users.getById(userId);
    currentUser = response.data;
    
    // ุนุฑุถ ุงูุงุณู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    const nameElement = document.querySelector('h1');
    nameElement.textContent = currentUser.name;
}
```

---

## ๐ ูุซุงู ุนููู ูุงูู

### ุงูุณููุงุฑูู:
1. ุงููุณุชุฎุฏู ID=1 ุงุณูู ุงูุญุงูู: "ุนุจุฏุงูุนุฒูุฒ ุฃุญูุฏ"
2. ูุฏุฎู ููููู ุงูุดุฎุตู ููุบูุฑ ุงูุงุณู ุฅูู: "ุนุจุฏุงูุนุฒูุฒ ุฃุญูุฏ ุงููุชููุฒ"
3. ูุญูุธ ุงูุชุนุฏูู
4. ูุณุฌู ุฎุฑูุฌ
5. ูุบูู ุงูุชุทุจูู
6. ููุชุญ ุงูุชุทุจูู ููุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

### ุงููุชูุฌุฉ:
```json
{
  "id": 1,
  "name": "ุนุจุฏุงูุนุฒูุฒ ุฃุญูุฏ ุงููุชููุฒ",  โ ุงูุงุณู ุงูุฌุฏูุฏ ููุฌูุฏ!
  "phone": "0551234567",
  "email": "passenger1@ubar.sa"
}
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

### โ ูุง ูุนูู ุงูุขู:
- ุชุนุฏูู ุงูุงุณู ูู ูุงุฌูุฉ ุงูููู ุงูุดุฎุตู โ
- ุญูุธ ุงูุงุณู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช PostgreSQL โ
- ุงุณุชูุฑุงุฑูุฉ ุงูุงุณู ุจุนุฏ ุชุณุฌูู ุงูุฎุฑูุฌ โ
- ุงุณุชูุฑุงุฑูุฉ ุงูุงุณู ุจุนุฏ ุฅุบูุงู ุงูุชุทุจูู โ
- ุงุณุชูุฑุงุฑูุฉ ุงูุงุณู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู โ

### ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ:

```bash
# ุดุบูู ุงุฎุชุจุงุฑ ุงุณุชูุฑุงุฑูุฉ ุงูุงุณู
node test-name-persistence.js
```

---

**ุชุงุฑูุฎ ุงูุงุฎุชุจุงุฑ:** 5 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ูุนูู ุจูุฌุงุญ 100%  
**ูุงุนุฏุฉ ุงูุจูุงูุงุช:** PostgreSQL ุนูู Railway  
**ุงูุงุฎุชุจุงุฑุงุช:** 4/4 ูุฌุญุช โ
