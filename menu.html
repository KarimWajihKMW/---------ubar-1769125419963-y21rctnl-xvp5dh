<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„ - Ø£ÙƒÙˆØ§Ø¯Ø±Ø§ ØªØ§ÙƒØ³ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
        }

        body.dark-mode {
            background: #0f172a;
            color: #e2e8f0;
        }

        body.dark-mode .bg-white {
            background: #0b1220;
        }

        body.dark-mode .bg-gray-50 {
            background: #111827;
        }

        body.dark-mode .text-gray-800 {
            color: #e5e7eb;
        }

        body.dark-mode .text-gray-700 {
            color: #cbd5e1;
        }

        body.dark-mode .text-gray-600 {
            color: #cbd5e1;
        }

        body.dark-mode .text-gray-500 {
            color: #94a3b8;
        }

        body.dark-mode .text-gray-400 {
            color: #94a3b8;
        }

        body.dark-mode .border-gray-100 {
            border-color: #1f2937;
        }

        body.dark-mode .divide-gray-100 > :not([hidden]) ~ :not([hidden]) {
            border-color: #1f2937;
        }

        body.dark-mode .shadow-sm {
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.35);
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-accepted {
            background: #d4edda;
            color: #155724;
        }
        
        .status-completed {
            background: #cfe2ff;
            color: #084298;
        }

        .filter-btn.active {
            background: #4f46e5;
            border-color: #4f46e5;
            color: #fff;
        }
    </style>
</head>
<body class="bg-gray-50 p-5">
    <div class="max-w-6xl mx-auto">
        <button class="flex items-center gap-2 bg-white text-gray-600 px-4 py-2 rounded-lg shadow-sm border border-gray-100 mb-6 hover:bg-gray-50 transition-colors" onclick="history.back()">
            <i class="fas fa-arrow-right"></i>
            Ø±Ø¬ÙˆØ¹
        </button>

        <div class="mb-6 text-center">
            <h1 class="text-2xl font-bold text-gray-800">ğŸš— Ø£ÙƒÙˆØ§Ø¯Ø±Ø§ ØªØ§ÙƒØ³ÙŠ</h1>
            <p class="text-gray-500">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="showTrips('pending')">
                <div class="text-3xl mb-3">ğŸ“‹</div>
                <div class="menu-item-title font-bold text-gray-800">Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø·Ù„Ø¨Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="showTrips('active')">
                <div class="text-3xl mb-3">ğŸš—</div>
                <div class="menu-item-title font-bold text-gray-800">Ø±Ø­Ù„Ø§Øª Ù†Ø´Ø·Ø©</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø±Ø­Ù„Ø§ØªÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="showTrips('completed')">
                <div class="text-3xl mb-3">âœ…</div>
                <div class="menu-item-title font-bold text-gray-800">Ù…ÙƒØªÙ…Ù„Ø©</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="goToPage('egypt-map.html')">
                <div class="text-3xl mb-3">ğŸ—ºï¸</div>
                <div class="menu-item-title font-bold text-gray-800">Ø§Ù„Ø®Ø±ÙŠØ·Ø©</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø®Ø±ÙŠØ·Ø© Ù…ØµØ± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="goToPage('profile.html')">
                <div class="text-3xl mb-3">ğŸ‘¤</div>
                <div class="menu-item-title font-bold text-gray-800">Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="goToPage('earnings.html')">
                <div class="text-3xl mb-3">ğŸ’°</div>
                <div class="menu-item-title font-bold text-gray-800">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙŠ</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="goToPage('support.html')">
                <div class="text-3xl mb-3">ğŸ’¬</div>
                <div class="menu-item-title font-bold text-gray-800">Ø§Ù„Ø¯Ø¹Ù…</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØ§Ù„Ø¯Ø¹Ù…</div>
            </div>

            <div class="menu-item bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:bg-gray-50 transition-colors cursor-pointer" onclick="logout()">
                <div class="text-3xl mb-3">ğŸšª</div>
                <div class="menu-item-title font-bold text-gray-800">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
                <div class="menu-item-desc text-gray-500 text-sm">Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ø­Ø³Ø§Ø¨</div>
            </div>
        </div>

        <div class="bg-white rounded-3xl shadow-sm border border-gray-100 p-6" id="tripsContainer" style="display: none;">
            <div class="flex items-center justify-between border-b border-gray-100 pb-4 mb-4">
                <h2 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                    <i class="fas fa-list"></i>
                    <span id="listTitle">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                </h2>
                <button class="px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors" onclick="closeTripsList()">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>

            <div class="flex flex-wrap gap-2 mb-4">
                <button class="filter-btn active px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 text-sm font-semibold hover:bg-gray-50 transition-colors" onclick="filterTrips('all', this)">
                    Ø§Ù„ÙƒÙ„
                </button>
                <button class="filter-btn px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 text-sm font-semibold hover:bg-gray-50 transition-colors" onclick="filterTrips('nearby', this)">
                    Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©
                </button>
                <button class="filter-btn px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 text-sm font-semibold hover:bg-gray-50 transition-colors" onclick="filterTrips('high-price', this)">
                    Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
                </button>
            </div>

            <div id="tripsList" class="space-y-3"></div>
        </div>
    </div>
    
    <script>
        let currentFilter = 'pending';
        let currentFilterType = 'all';
        let allTrips = [];
        
        // Ù†Ù…ÙˆØ°Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø­Ù„Ø§Øª
        function initializeSampleTrips() {
            allTrips = [
                {
                    id: 1,
                    passenger: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                    initials: 'Ø£.Ù…',
                    from: 'Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯',
                    to: 'Ø­ÙŠ Ø§Ù„Ø¹Ù„ÙŠØ§',
                    price: 35,
                    distance: 8.5,
                    status: 'pending'
                },
                {
                    id: 2,
                    passenger: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                    initials: 'Ù.Ø¹',
                    from: 'Ù…Ø·Ø§Ø± Ø§Ù„Ù…Ù„Ùƒ Ø®Ø§Ù„Ø¯',
                    to: 'Ø¨Ø±Ø¬ Ø§Ù„Ù…Ù…Ù„ÙƒØ©',
                    price: 95,
                    distance: 35.2,
                    status: 'pending'
                },
                {
                    id: 3,
                    passenger: 'Ø®Ø§Ù„Ø¯ Ø³Ø¹ÙˆØ¯',
                    initials: 'Ø®.Ø³',
                    from: 'Ø­ÙŠ Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†',
                    to: 'Ø§Ù„Ù†Ø®ÙŠÙ„ Ù…ÙˆÙ„',
                    price: 45,
                    distance: 12.8,
                    status: 'active'
                },
                {
                    id: 4,
                    passenger: 'Ù†ÙˆØ±Ø© Ù…Ø­Ù…ÙˆØ¯',
                    initials: 'Ù†.Ù…',
                    from: 'Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù„Ùƒ Ø³Ø¹ÙˆØ¯',
                    to: 'Ø­ÙŠ Ø§Ù„Ù…Ù„Ø²',
                    price: 42,
                    distance: 15.3,
                    status: 'completed'
                },
                {
                    id: 5,
                    passenger: 'Ø³Ø§Ø±Ø© Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…',
                    initials: 'Ø³.Ø¥',
                    from: 'Ø§Ù„Ø±ÙŠØ§Ø¶ Ø¬Ø§Ù„ÙŠØ±ÙŠ',
                    to: 'Ø§Ù„Ù†Ø®ÙŠÙ„ Ù…ÙˆÙ„',
                    price: 38,
                    distance: 14.8,
                    status: 'pending'
                },
                {
                    id: 6,
                    passenger: 'Ø¹Ù…Ø± ÙŠÙˆØ³Ù',
                    initials: 'Ø¹.ÙŠ',
                    from: 'Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ù…Ù„ÙƒØ©',
                    to: 'Ø§Ù„Ø±ÙŠØ§Ø¶ ÙØ±ÙˆÙ†Øª',
                    price: 55,
                    distance: 28.5,
                    status: 'completed'
                }
            ];
        }
        
        function showTrips(filter) {
            currentFilter = filter;
            currentFilterType = 'all';
            setActiveFilterButton('all', document.querySelector('.filter-btn'));
            renderTrips();
            const container = document.getElementById('tripsContainer');
            container.style.display = 'block';
            container.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function setActiveFilterButton(filterType, buttonEl) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            if (buttonEl) {
                buttonEl.classList.add('active');
                return;
            }
            const fallback = document.querySelector('.filter-btn');
            if (fallback) fallback.classList.add('active');
        }

        function filterTrips(filterType, buttonEl) {
            currentFilterType = filterType;
            setActiveFilterButton(filterType, buttonEl);
            renderTrips();
        }

        function renderTrips() {
            const tripsList = document.getElementById('tripsList');
            const listTitle = document.getElementById('listTitle');

            const titles = {
                pending: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©',
                active: 'Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©',
                completed: 'Ø§Ù„Ø±Ø­Ù„Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©'
            };

            let baseTrips = [];

            if (currentFilterType === 'all') {
                baseTrips = allTrips.filter(trip => trip.status === currentFilter);
                listTitle.textContent = titles[currentFilter];
            } else {
                baseTrips = allTrips.slice();
                listTitle.textContent = currentFilterType === 'nearby'
                    ? 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©'
                    : 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ø§Ù‹';
            }

            let filtered = baseTrips;

            if (currentFilterType === 'nearby') {
                filtered = baseTrips
                    .slice()
                    .sort((a, b) => Number(a.distance || 0) - Number(b.distance || 0));
            } else if (currentFilterType === 'high-price') {
                filtered = baseTrips
                    .slice()
                    .sort((a, b) => Number(b.price || 0) - Number(a.price || 0));
            }

            if (filtered.length === 0) {
                const filterLabel = currentFilterType === 'all'
                    ? titles[currentFilter]
                    : currentFilterType === 'nearby'
                        ? 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ù‚Ø±Ø¨'
                        : 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ø§Ù‹';
                tripsList.innerHTML = `
                    <div class="bg-gray-50 p-6 rounded-2xl text-center text-gray-500">
                        <div class="text-3xl mb-2">ğŸ“­</div>
                        <div class="font-bold text-gray-800">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø­Ù„Ø§Øª</div>
                        <div class="text-sm text-gray-500 mt-1">Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ø§ ØªÙˆØ¬Ø¯ ${filterLabel}</div>
                    </div>
                `;
                return;
            }

            tripsList.innerHTML = filtered.map(trip => {
                const statusMap = {
                    pending: { label: 'â³ Ù…Ø¹Ù„Ù‚Ø©', className: 'status-pending' },
                    active: { label: 'ğŸš— Ù†Ø´Ø·Ø©', className: 'status-accepted' },
                    completed: { label: 'âœ… Ù…ÙƒØªÙ…Ù„Ø©', className: 'status-completed' }
                };
                const statusInfo = statusMap[trip.status] || statusMap.pending;
                return `
                <div class="trip-card flex flex-col md:flex-row md:items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:bg-gray-50 transition-colors">
                    <div class="trip-info flex-1 flex items-center gap-4">
                        <div class="trip-avatar w-12 h-12 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center font-bold">
                            ${trip.initials}
                        </div>
                        <div class="trip-details flex-1">
                            <div class="trip-passenger-name font-bold text-gray-800">${trip.passenger}</div>
                            <div class="trip-locations text-gray-500 text-sm flex items-center gap-2">
                                <span class="trip-location-icon">ğŸ“</span>
                                <span>${trip.from} â† ${trip.to}</span>
                            </div>
                            <div class="text-xs text-gray-400 mt-1">
                                <i class="fas fa-road"></i> ${trip.distance} ÙƒÙ…
                            </div>
                        </div>
                    </div>
                    <div class="trip-price font-bold text-green-600">${trip.price} Ø±.Ø³</div>
                    ${trip.status === 'pending' ? `
                        <div class="trip-actions flex gap-2">
                            <button class="accept-btn bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors" onclick="acceptTrip(${trip.id})">
                                <i class="fas fa-check"></i> Ù‚Ø¨ÙˆÙ„
                            </button>
                            <button class="reject-btn bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-700 transition-colors" onclick="rejectTrip(${trip.id})">
                                <i class="fas fa-times"></i> Ø±ÙØ¶
                            </button>
                        </div>
                    ` : `
                        <div>
                            <span class="status-badge ${statusInfo.className} px-3 py-1 rounded-full text-xs font-semibold">
                                ${statusInfo.label}
                            </span>
                        </div>
                    `}
                </div>
            `;
            }).join('');
        }
        
        function acceptTrip(tripId) {
            const trip = allTrips.find(t => t.id === tripId);
            if (trip) {
                trip.status = 'active';
                alert(`âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø±Ø­Ù„Ø© Ù…Ø¹ ${trip.passenger}`);
                showTrips('pending');
            }
        }
        
        function rejectTrip(tripId) {
            const trip = allTrips.find(t => t.id === tripId);
            if (trip) {
                allTrips = allTrips.filter(t => t.id !== tripId);
                alert(`âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø±Ø­Ù„Ø©`);
                showTrips('pending');
            }
        }
        
        function closeTripsList() {
            document.getElementById('tripsContainer').style.display = 'none';
        }
        
        function goToPage(page) {
            window.location.href = page;
        }
        
        function logout() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                const darkMode = localStorage.getItem('akwadra_dark_mode');
                localStorage.clear();
                if (darkMode !== null) {
                    localStorage.setItem('akwadra_dark_mode', darkMode);
                }
                window.location.href = 'index.html';
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', function() {
            initializeSampleTrips();
        });
    </script>
    <script>
        (function() {
            try {
                if (localStorage.getItem('akwadra_dark_mode') === '1') {
                    document.body.classList.add('dark-mode');
                }
            } catch (e) {
                // ignore
            }
        })();
    </script>
</body>
</html>
